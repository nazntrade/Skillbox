# Разметка, views

Задача
Цель задания
В задании вы продолжите дорабатывать приложение, с которым работали на предыдущих уроках. Вы научитесь отображать фрагменты динамически, передавать аргументы внутрь фрагментов, работать с бекстеком, взаимодействовать с активити и использовать вложенные фрагменты.

В качестве дополнительного задания вам предстоит самостоятельно разобраться с паттерном master-detail и научиться отображать фрагменты с анимацией.


Что нужно сделать
Создайте фрагмент LoginFragment на основе экрана логина из домашнего задания модуля «Жизненный цикл Activity». Перенесите в него логику экрана логина из активити. 
MainActivity должно выступать в качестве контейнера для фрагментов. Поэтому в разметке активити должен присутствовать только контейнер FrameLayout. 
Используйте транзакции фрагментов, чтобы динамически менять их в активити. По запуску приложения в MainActivity должен открыться LoginFragment с формой логина. После успешного логина LoginFragment должен меняться на MainFragment.
MainFragment является родительским фрагментом для двух других фрагментов: списка (ListFragment) и детальной информации (DetailFragment). Для этого используйте вложенные фрагменты и childFragmentManager. При открытии MainFragment в его контейнер должен добавляться ListFragment со списком элементов.
По нажатию на элемент списка должен открыться фрагмент детальной информации. Также необходимо настроить обращение к родительскому фрагменту MainFragment и оповестить его, чтобы он открыл фрагмент детальной информации для выбранной сущности.

По нажатию кнопки «Назад» в DetailFragment приложение возвращается на ListFragment. По нажатию «Назад» на ListFragment происходит выход из приложения. Используйте fragment backstack.
В итоге должна получиться следующая структура:


Дополнительное задание
Настройте анимацию при смене фрагментов.
Используйте паттерн master-detail, чтобы отобразить список элементов и детальную информацию на одном экране, если приложение запущено на планшете. Для этого:
Создайте альтернативный ресурс разметки MainFragment для планшета.
В ресурсе разметки планшета должен быть статический фрагмент с ListFragment в левой части экрана и контейнер для динамического фрагмента справа. Установите id динамического контейнера аналогично равным id контейнера в обычной вёрстке MainFragment из основной части домашнего задания.
При запуске MainFragment проверяйте, запущено ли приложение на планшете. Если да — ничего не делайте, так как ListFragment будет отображен автоматически. Если нет — настройте открытие ListFragment, как в основной части домашнего задания.
При нажатии на элемент списка должен открываться фрагмент детальной информации в правой части экрана. Этот пункт должен заработать автоматически при корректной реализации основной части домашнего задания и пунктов, указанных выше.



Критерии оценки
Код оформлен в соответствии с правилами.
Соблюдены принципы инкапсуляции с помощью модификаторов доступа.
Классы не являются финальными (open, abstract) только по необходимости.
Текстовые строки не являются захардкоженными и используются из ресурсов.
Фрагменты взаимодействуют друг с другом с помощью обращения к родительской сущности: активити или родительскому фрагменту.
При обращении к родительской сущности используется её приведение к интерфейсу, а не к конкретному классу.
Данные передаются во фрагмент с помощью аргументов.
Фрагмент с аргументами создаётся в функции внутри companion object класса фрагмента: fun newInstance(args): Fragment.


Как отправить задание на проверку
Используйте репозиторий learning_materials / android_basic
Скачайте изменения в репозитории на локальную машину.
Выполните домашнее задание в папке Fragments. 
Перед выполнением скопируйте проект из папки ActivityLifecycle, после этого сделайте первый коммит, выполните домашнее задание и сделайте второй коммит (или несколько коммитов). Отправьте коммиты в удалённый репозиторий.



# Task 2

Задача
Цель задания
Вы научитесь работать с ViewPager и диалогами, создадите экран с перелистывающимися страницами, поработаете со вкладками и анимацией перелистывания страниц. 



Что нужно сделать
Создайте AppActivity, которая будет хостить все фрагменты в приложении.
Создайте и отобразите фрагмент со вьюпейджером, в котором будет располагаться набор страниц. Необходимо использовать ViewPager2. Страница будет отображать статью с картинкой и текст под ней. 
Создайте фрагмент для страницы статьи. В качестве аргументов фрагмент должен принимать string-ресурс и drawable-ресурс. Используйте аннотации @StringRes, @DrawableRes. Разметку фрагмента создайте по своему предпочтению.
Создайте data class модели статьи, который будет хранить string-ресурс текста статьи и drawable-ресурс изображения статьи.
Создайте класс адаптера, который будет конвертировать объект класса статьи во фрагмент. Необходимо наследовать адаптер от FragmentStateAdapter, реализовать требуемые методы.
Свяжите адаптер со вьюпейджером во фрагменте.
Добавьте индикатор выбранной страницы для ViewPager.
Добавьте трансформацию страниц при перелистывании.
Свяжите ViewPager с TabLayout для отображения вкладок. У вкладки должен быть заголовок, который представляет из себя очень краткий заголовок статьи. Для TabLayout используйте подходящий tabMode.
Во фрагменте статьи добавьте кнопку «Сгенерировать событие», по нажатию на которую будет появляться бейджик на вкладке случайной статьи (или инкрементироваться счётчик бейджика, если бейджик уже существовал). Бейджик на вкладке статьи должен исчезать при перелистывании на эту статью.
Создайте enum ArticleTag для тегов статей. Например: новости, технологии, политика.
В класс статьи добавьте поле tags. Тип поля — List<ArticleTag>
На фрагмент со вьюпейджером добавьте тулбар, в меню тулбара добавьте кнопку фильтрации статей по тегам.
По нажатию на кнопку фильтрации отобразите диалог, в котором можно выбрать интересующие теги статей и применить фильтр. Реализуйте диалог с помощью DialogFragment. Диалог должен поддерживать мультивыбор тегов. В диалоге должны быть кнопки «Применить» — применяет фильтр, «Отмена» — закрывает диалог без применения фильтра. При открытии диалога необходимо отобразить теги, которые были выбраны раньше, для этого выбранные ранее теги необходимо передавать через аргументы. По умолчанию при первом открытии экрана все теги должны быть выбраны. 
При нажатии на кнопку «Применить» в диалоге выбранные теги передаются в родительский фрагмент со вьюпейджером. В родительском фрагменте происходит фильтрация статей, которые подходят по выбранным тегам. Отфильтрованные статьи устанавливаются во вьюпейджер.


Советы и рекомендации
Для добавления индикатора можно использовать библиотеку.
Примеры трансформаций можно найти в репозитории.
Пример установки отфильтрованных статей (рекомендуется вынести это в метод, который будет принимать список отфильтрованных статей, также вызывать этот метод при открытии экрана — передавать на вход методу все статьи): 
val adapter = OnboardingAdapter(filteredArticles, activity)
viewpager.adapter = adapter
indicator.setViewPager2(viewpager)


Как отправить задание на проверку
Используйте репозиторий learning_materials / android_basic
Скачайте изменения в репозитории на локальную машину.
Выполните ДЗ в папке Fragments.
Отправьте коммиты в удалённый репозиторий.