# Работа с сетью

Task
Цель задания 
Вы научитесь работать с сетевым API в приложении, используя библиотеку OkHttp. Вы сделаете запрос, распарсите результат и обработаете ошибки. Также вы поработаете с OkHttp Interceptor и интегрируете Flipper в приложение.


Что нужно сделать 
Создайте экран с view: EditText — для ввода названия фильма, EditText — для ввода года фильма. 
Изучите документацию по созданию выпадающих списков. Создайте выпадающий список с типом фильмов для поиска: сериал, фильм, эпизод, не выбрано. Используйте string-array из ресурсов для того, чтобы передавать список строк в адаптер выпадающего списка. 
Создайте ViewModel, Repository для поиска фильмов. 
Изучите API поиска фильмов. Узнайте, как отправлять параметры поискового запроса, года и типа фильма. 
Настройте network security configuration так, чтобы была возможность обращаться к http только по хосту APIi. 
Создайте Okhttp-клиент. 
Совершите запрос с требуемыми параметрами на сервер из репозитория. 
Попытайтесь совершить запрос к сетевому API в главном потоке. Посмотрите в логе, какое исключение выбрасывается в этом случае. 
Распарсите JSON из тела ответа в список объектов фильма. В объекте фильма должна быть следующая информация: название, тип, год, идентификатор imdb, постер. 
Верните список фильмов из репозитория с помощью callback и отобразите найденные фильмы на экране. Для элемента списка выведите всю информацию из объекта фильма: название, тип, год, идентификатор imdb, постер. 
Обработайте случай загрузки данных: отобразите ProgressBar вместо списка фильмов, заблокируйте поля ввода и кнопки, когда происходит взаимодействие с сервером. 
Обработайте случай ошибки: в центре экрана отобразите TextView с текстом ошибки и с кнопкой «Повторить». По нажатию на кнопку запрос на сервер должен повториться. 
Добавьте Okhttp interceptor, который для всех запросов добавляет API key в query «Параметры». Избавьтесь от установки API key при формировании запроса. Добавьте interceptor для OkHttpClient. 
Интегрируйте Flipper в приложение и убедитесь, что он позволяет просматривать информацию о совершаемых запросах на сервер и об ответах. 

Дополнительные материалы 
 Как создать выпадающий список (раздел Exposed Dropdown Menus).
 Использование string array.
 Network security configuration.
 Paging 3. 


Что оценивается 
Код оформлен в соответствии с правилами. 
Соблюдён принцип инкапсуляции с помощью модификаторов доступа.
Классы являются не финальными (open, abstract) только при необходимости.
Текстовые строки не являются захардкоженными и используются из ресурсов. 
Код разнесён по сущностям в соответствии с их ответственностями. 
У EditText указан inputType. 
Нельзя искать фильмы с введённым некорректным годом. 
OkHttpClient является синглтоном.
Обрабатываются все ошибки при запросе фильмов: сетевые проблемы и отсутствие сети, ошибки сервера, ошибки парсинга. 
Выполнены все пункты в соответствии с заданием. 


Как отправить задание на проверку 
Используйте репозиторий learning_materials / android_basic. 
Скачайте изменения в репозитории на локальную машину. 
Выполните домашнее задание в папке Networking. 
Отправьте коммиты в удалённый репозиторий.
